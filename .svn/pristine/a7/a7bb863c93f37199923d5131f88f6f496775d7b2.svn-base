define("util/localizeImg",["lib/jquery","util/ajaxPromise"],function(t){var e=t("lib/jquery"),a=t("util/ajaxPromise");return function(t){var i,r,o=[];return i=/^https?:\/\/(?:(?:\d+\.){3}\d+:\d+|.*\.91xuexibao\.com)\/.*/,r=window.basePath+"image/edit/photo-default.png",t=[].filter.call(t,function(t){var a=e(t),r=a.attr("src");return i.test(r)&&a.data("width")?void 0:(o.push(encodeURIComponent(r)),!0)}),o[0]?a({url:window.basePath+"fileupload/uploadRemoteImages",type:"GET",dataType:"json",data:{remoteUrls:o.join()}}).then(function(a){var i=!1;return e.each(t,function(t){var o=a.result[t];o.imageUrl?e(this).attr({src:o.imageUrl,"data-width":o.width,"data-height":o.height}):(i=!0,e(this).attr("src",r))}),i}):Promise.resolve(!1)}});